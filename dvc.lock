schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 688f9c56f4a9d950867dfa6dc6606917
      size: 835
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          raw_db: data/raw/raw_diabetes.csv
    outs:
    - path: data/raw/raw_diabetes.csv
      hash: md5
      md5: 4f95456d34e5664e135092a18e1a5107
      size: 25496
  features_load:
    cmd: python src/stages/features_load.py --config=params.yaml
    deps:
    - path: data/raw/raw_diabetes.csv
      hash: md5
      md5: 4f95456d34e5664e135092a18e1a5107
      size: 25496
    - path: src/stages/features_load.py
      hash: md5
      md5: ee3b9100290a95a4218eceade1e4abb7
      size: 884
    params:
      params.yaml:
        base:
          random_state: 42
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
    outs:
    - path: data/processed/features_diabetes.csv
      hash: md5
      md5: db255e4de1ad37b9f0599c58f1a50b5f
      size: 20156
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/features_diabetes.csv
      hash: md5
      md5: db255e4de1ad37b9f0599c58f1a50b5f
      size: 20156
    - path: src/stages/data_split.py
      hash: md5
      md5: 41f372fb921d3f948407275cac20ff8e
      size: 1133
    params:
      params.yaml:
        base:
          random_state: 42
        data_split:
          test_db: data/processed/test_diabetes.csv
          train_db: data/processed/train_diabetes.csv
          test_size: 0.2
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
    outs:
    - path: data/processed/test_diabetes.csv
      hash: md5
      md5: c9ccb209c900dc3d0cea1b5eada61ff3
      size: 1061
    - path: data/processed/train_diabetes.csv
      hash: md5
      md5: 5686c4efe4f09a3e2cf3ed6c8e1b6c93
      size: 4223
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed/train_diabetes.csv
      hash: md5
      md5: 5686c4efe4f09a3e2cf3ed6c8e1b6c93
      size: 4223
    - path: src/stages/train.py
      hash: md5
      md5: 29003f1647225d244a15c97e008a0a24
      size: 1143
    params:
      params.yaml:
        data_split:
          test_db: data/processed/test_diabetes.csv
          train_db: data/processed/train_diabetes.csv
          test_size: 0.2
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
        model:
          path: models/model.joblib
        train:
          cv: 3
          estimators_used: randomForest
          estimators:
            logreg:
              param_grid:
                C:
                - 0.01
                - 0.1
                - 0
                - 1
                solver:
                - newton-cg
                - lbfgs
                - liblinear
                - sag
                - saga
                multi_class:
                - ovr
                - multinomial
                max_iter:
                - 50
                - 100
                - 200
            svm:
              param_grid:
                C_values: np.logspace(-3, 3, 7)
                kernel:
                - linear
                - poly
                - rbf
                - sigmoid
                degree_values:
                - 2
                - 3
                - 4
            randomForest:
              param_grid:
                n_estimators:
                - 50
                - 100
                - 200
                max_depth:
                - 10
                - 20
                - 30
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 0b36a4495f638bf097cea21b008a1858
      size: 2202739
  evaluate:
    cmd: python src/stages/evaluation.py --config=params.yaml
    deps:
    - path: data/processed/test_diabetes.csv
      hash: md5
      md5: c9ccb209c900dc3d0cea1b5eada61ff3
      size: 1061
    - path: models/model.joblib
      hash: md5
      md5: 0b36a4495f638bf097cea21b008a1858
      size: 2202739
    - path: src/stages/evaluation.py
      hash: md5
      md5: 9f3b845c5cf26ec5ae5669fbb949f382
      size: 2111
    params:
      params.yaml:
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
    outs:
    - path: reports/confusion_matrix.png
      hash: md5
      md5: f3749bf13e4372568ae908c8d3b4f1ff
      size: 24608
    - path: reports/metrics.json
      hash: md5
      md5: 5ba9a9a8455c2dee13f553ee335d297b
      size: 92
