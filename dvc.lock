schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 688f9c56f4a9d950867dfa6dc6606917
      size: 835
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          raw_db: data/raw/raw_diabetes.csv
    outs:
    - path: data/raw/raw_diabetes.csv
      hash: md5
      md5: 4f95456d34e5664e135092a18e1a5107
      size: 25496
  features_load:
    cmd: python src/stages/features_load.py --config=params.yaml
    deps:
    - path: data/raw/raw_diabetes.csv
      hash: md5
      md5: 4f95456d34e5664e135092a18e1a5107
      size: 25496
    - path: src/stages/features_load.py
      hash: md5
      md5: ee3b9100290a95a4218eceade1e4abb7
      size: 884
    params:
      params.yaml:
        base:
          random_state: 42
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
    outs:
    - path: data/processed/features_diabetes.csv
      hash: md5
      md5: db255e4de1ad37b9f0599c58f1a50b5f
      size: 20156
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/features_diabetes.csv
      hash: md5
      md5: db255e4de1ad37b9f0599c58f1a50b5f
      size: 20156
    - path: src/stages/data_split.py
      hash: md5
      md5: 41f372fb921d3f948407275cac20ff8e
      size: 1133
    params:
      params.yaml:
        base:
          random_state: 42
        data_split:
          test_db: data/processed/test_diabetes.csv
          train_db: data/processed/train_diabetes.csv
          test_size: 0.2
        featurize:
          featurize_db: data/processed/features_diabetes.csv
          target_column: target
    outs:
    - path: data/processed/test_diabetes.csv
      hash: md5
      md5: c9ccb209c900dc3d0cea1b5eada61ff3
      size: 1061
    - path: data/processed/train_diabetes.csv
      hash: md5
      md5: 5686c4efe4f09a3e2cf3ed6c8e1b6c93
      size: 4223
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed/train_diabetes.csv
      hash: md5
      md5: 5686c4efe4f09a3e2cf3ed6c8e1b6c93
      size: 4223
    - path: src/stages/train.py
      hash: md5
      md5: 29003f1647225d244a15c97e008a0a24
      size: 1143
    params:
      params.yaml:
        data_split.train_db: data/processed/train_diabetes.csv
        featurize.target_column: target
        model:
          path: models/model.joblib
        train:
          cv: 3
          estimators_used: xgbc
          estimators:
            xgbc:
              param_grid:
                learning_rate:
                - 0.01
                max_depth:
                - 3
                - 5
                - 7
                n_estimators:
                - 1000
                - 1500
                - 2000
            logreg:
              param_grid:
                C:
                - 0.001
                - 0.01
                - 0.1
                solver:
                - lbfgs
                multi_class:
                - multinomial
                max_iter:
                - 50
                - 100
                - 200
            svm:
              param_grid:
                C:
                - 0.01
                - 0.001
                kernel:
                - linear
                - poly
                - rbf
                degree:
                - 2
                - 3
                - 4
                gamma:
                - scale
            randomForest:
              param_grid:
                n_estimators:
                - 200
                - 500
                - 1000
                max_depth:
                - 20
                - 30
    outs:
    - path: models/model.joblib
      hash: md5
      md5: ab1e2f4d6996c6cd855ba0177b102b78
      size: 2121786
  evaluate:
    cmd: python src/stages/evaluation.py --config=params.yaml
    deps:
    - path: data/processed/test_diabetes.csv
      hash: md5
      md5: c9ccb209c900dc3d0cea1b5eada61ff3
      size: 1061
    - path: models/model.joblib
      hash: md5
      md5: ab1e2f4d6996c6cd855ba0177b102b78
      size: 2121786
    - path: src/stages/evaluation.py
      hash: md5
      md5: b60b8f6df2a25d17a48617e115d645f4
      size: 2785
    params:
      params.yaml:
        data_split.test_db: data/processed/test_diabetes.csv
        featurize.target_column: target
        reports:
          confusion_matrix_data: reports/confusion_matrix_data.csv
          confusion_matrix_image: reports/confusion_matrix.png
          metrics_file: reports/metrics.json
    outs:
    - path: reports/confusion_matrix.png
      hash: md5
      md5: 25fedbc078e0bde5a13140c1b07a1505
      size: 25385
    - path: reports/confusion_matrix_data.csv
      hash: md5
      md5: 255810662940a6651428498663ffbcfe
      size: 3868
    - path: reports/metrics.json
      hash: md5
      md5: ce64e6d95de01070aa8182c97257bf75
      size: 92
